schema: '2.0'
stages:
  data_loading:
    cmd: python anime_recommendation_app/data_loading.py
    deps:
    - path: anime_recommendation_app/data_loading.py
      hash: md5
      md5: 5472f38d4d1fb1484a905978023bf6a2
      size: 1008
    outs:
    - path: data/raw
      hash: md5
      md5: 4ee7ea5b062578747b0e0498ce27e850.dir
      size: 173801132
      nfiles: 2
  data_cleaning:
    cmd: python anime_recommendation_app/data_cleaning.py
    deps:
    - path: anime_recommendation_app/data_cleaning.py
      hash: md5
      md5: a5ed479d5743293830d5c3007346723a
      size: 2290
    - path: data/raw
      hash: md5
      md5: 4ee7ea5b062578747b0e0498ce27e850.dir
      size: 173801132
      nfiles: 2
    outs:
    - path: data/interim/anime_preprocessed.csv
      hash: md5
      md5: e903377b955496603517ed7b94eeca11
      size: 1151270
    - path: data/interim/rating_cleaned.csv
      hash: md5
      md5: 58d216a53ed13a6c2a865e685cdcd105
      size: 248353461
  feature_engineering:
    cmd: python anime_recommendation_app/feature_engineering.py
    deps:
    - path: anime_recommendation_app/feature_engineering.py
      hash: md5
      md5: fd8886b448cc48c2ec2aff9e865cb374
      size: 6044
    - path: data/interim/anime_preprocessed.csv
      hash: md5
      md5: e903377b955496603517ed7b94eeca11
      size: 1151270
    - path: data/interim/rating_cleaned.csv
      hash: md5
      md5: 58d216a53ed13a6c2a865e685cdcd105
      size: 248353461
    params:
      params.yaml:
        data.min_anime_ratings: 100
        data.min_user_ratings: 100
    outs:
    - path: data/interim/merged_data.csv
      hash: md5
      md5: 26ce3fda262d67efa81e96d29486aa00
      size: 210159716
    - path: models/artifacts/anime_encoded_to_anime.json
      hash: md5
      md5: 55f34c47be24f17f1e502c43fe78f248
      size: 31813
    - path: models/artifacts/anime_to_anime_encoded.json
      hash: md5
      md5: 260bfd54ea328726248e1e7c02ae3add
      size: 31813
    - path: models/artifacts/genre_to_genre_encoded.json
      hash: md5
      md5: 3e235b5d0d23be1438c98a8e63d7bb13
      size: 502
    - path: models/artifacts/rating_scale.json
      hash: md5
      md5: 0be2e48e11b7ccef1c0e7ba9f656200e
      size: 34
    - path: models/artifacts/user_to_user_encoded.json
      hash: md5
      md5: 4a7562ce1bc42fff1edf72ca9cc482da
      size: 314685
  data_preprocessing:
    cmd: python anime_recommendation_app/data_preprocessing.py
    deps:
    - path: anime_recommendation_app/data_preprocessing.py
      hash: md5
      md5: 6bc0bd0c36c0391c48d031d89fb6e753
      size: 1209
    - path: data/interim/merged_data.csv
      hash: md5
      md5: 26ce3fda262d67efa81e96d29486aa00
      size: 210159716
    params:
      params.yaml:
        data_preprocessing.valid_size: 0.8
    outs:
    - path: data/processed
      hash: md5
      md5: b90f0f1cf8f80ae95f9dbbfd703533e5.dir
      size: 236533608
      nfiles: 2
  model_training:
    cmd: python -m anime_recommendation_app.modeling.model_training
    deps:
    - path: anime_recommendation_app/modeling/model_training.py
      hash: md5
      md5: 62ac0dc317865897cf074ec0e29f247e
      size: 3970
    - path: data/processed
      hash: md5
      md5: b90f0f1cf8f80ae95f9dbbfd703533e5.dir
      size: 236533608
      nfiles: 2
    params:
      params.yaml:
        model.batch_size: 2048
        model.embedding_size: 50
        model.epoch: 100
        model.initializer: he_normal
        model.learning_rate: 0.0001
        model.optimizer: adam
        model.regularization_strength: 1e-06
    outs:
    - path: models/model.keras
      hash: md5
      md5: 164be36376ddd20306da733b745c3caf
      size: 12603794
  model_evaluation:
    cmd: python -m anime_recommendation_app.modeling.model_evaluation
    deps:
    - path: anime_recommendation_app/modeling/model_evaluation.py
      hash: md5
      md5: 49db9aa91f22b45738d547a436b414f6
      size: 3483
    - path: data/processed/test.csv
      hash: md5
      md5: 1b7c3ecd49e590afcf1cf23c5e99a13c
      size: 47528128
    - path: models/model.keras
      hash: md5
      md5: 164be36376ddd20306da733b745c3caf
      size: 12603794
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 9177bd8468c7aab0dc7fa05920f3b2cc
      size: 92
